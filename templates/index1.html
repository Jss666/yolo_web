<!DOCTYPE html>
<html lang="en">
  <head>
    <title>目标检测系统</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="D:\WEB\static\style.css">
  </head>
  <body>
    <h2 id="title">目标检测系统</h2>
    <br />
    <br />
    <img id="imageDisplay" width="500" height="500" />
    <br />
    <form method="POST" enctype="multipart/form-data">
      <input type="file" id="imageFile" onchange="displayImage()" 
        <input type="file" name="file">
        <input type="submit" value="上传">
    </form>
    <br />
    <div id="imagePath"></div>
    <script>
        function displayImage() {
            var fileInput = document.getElementById("imageFile");
            var imagePath = document.getElementById("imagePath");
            var imageDisplay = document.getElementById("imageDisplay");
            var file = fileInput.files[0];
            var reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function (e) {
              imagePath.innerHTML = "Image Path: " + fileInput.value;
              imageDisplay.src = e.target.result;
            };
      }
      function Detect() {
    $.ajax({
        type: 'POST',
        url: '/det',
        success: function(response) {
            console.log(response);
        },
        error: function(error) {
            console.log(error);
        }
    });
  }
      function Show() {
              var img = document.getElementById('img');
              img.src = '/sh';
          }
    </script>
      <button id="my-button" onclick="Detect()">检测</button>
      <a href="http://127.0.0.1:5000/sh">
          <button id="my-button1" onclick="Show()">显示图片</button>
      </a>

  </body>
</html>